@startuml
actor Utente
participant UserPanelController
participant UserPanelService
participant GameReportDAO
participant UserDAO
participant DocumentDAO
participant StopWordDAO
participant PopupBuilder
participant Database
participant View

== Gestione StopWords ==
Utente -> UserPanelController : click "Gestione StopWords"
UserPanelController -> UserPanelService : getAllStopwords()
StopWordDAO -> Database : SELECT * FROM StopWords
Database --> StopWordDAO : lista
StopWordDAO --> UserPanelService : Set<String>
UserPanelService --> UserPanelController : elenco stopwords
UserPanelController -> PopupBuilder : crea popup "Gestione StopWords"

alt aggiunta manuale
    UserPanelController -> UserPanelService : addStopWords(text)
    UserPanelService -> StopWordDAO : insert(word)
    StopWordDAO -> Database : INSERT INTO StopWords ...
end

alt caricamento da file
    UserPanelController -> FileChooser : seleziona file.txt
    FileChooser --> UserPanelController : file
    UserPanelController -> UserPanelService : addStopwordsFromFile(file)
    UserPanelService -> StopWordDAO : insert(words...)
    StopWordDAO -> Database : INSERT INTO StopWords ...
end

alt rimozione stopword
    UserPanelController -> UserPanelService : deleteStopword(word)
    StopWordDAO -> Database : DELETE FROM StopWords WHERE word = ?
end

UserPanelController -> View : aggiorna ListView / mostra feedback
@enduml